<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Plan de Alimentación Personalizado</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: var(--bg-color, #121212);
      color: var(--text-color, #fff);
      margin: 0;
      padding: 20px;
      transition: background-color 0.5s, color 0.5s;
    }

    .container {
      max-width: 900px;
      margin: auto;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
    }

    .section {
      background-color: rgba(255, 255, 255, 0.05);
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 12px;
      animation: fadeIn 1s ease;
    }

    .toggle-theme {
      float: right;
      cursor: pointer;
      background: none;
      border: 1px solid #ccc;
      padding: 6px 12px;
      border-radius: 6px;
      color: inherit;
    }

    .btn {
      display: block;
      margin: 20px auto;
      padding: 10px 20px;
      background-color: #1e88e5;
      color: #fff;
      border: none;
      border-radius: 10px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s;
    }

    .btn:hover {
      background-color: #1565c0;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div class="container">
    <button class="toggle-theme" onclick="toggleTheme()">Cambiar tema</button>
    <h1>Tu Plan de Alimentación</h1>
    
    <div class="section" id="infoUsuario"></div>
    <div class="section" id="planAlimentacion"></div>
    <div class="section" id="tipsSalud"></div>

    <button class="btn" onclick="window.location.href='menu.html'">Volver al menú</button>
  </div>

  <script>
    const planAlimentacion = {
      "Básquetbol": {
        "Base": {
          "normal": {
            "endomorfo": [
              "Desayuno: Avena con plátano y canela",
              "Almuerzo: Pollo a la plancha con quinoa",
              "Cena: Ensalada de atún con garbanzos",
              // + más comidas variadas
            ]
          }
          // + otros IMC/tipos de cuerpo
        }
        // + otras subdisciplinas
      },
      // + otros deportes: MTB, Natación, Boxeo, Ciclismo, etc.
    };

    const tips = {
      "sobrepeso": "Reduce azúcares, come más fibras, toma 2-3 litros de agua al día.",
      "normal": "Mantén una dieta equilibrada y cuida la hidratación constante.",
      "bajo peso": "Agrega snacks saludables entre comidas, aumenta calorías de forma nutritiva.",
      "Ciclismo": "Consume carbohidratos antes de entrenar y electrolitos post-entreno.",
      "Boxeo": "Alta proteína para recuperación, mucha hidratación tras los rounds.",
      "Buceo": "Evita comidas pesadas antes de bucear, hidrátate antes y después.",
      // Más según deporte
    };

    function getDatos() {
      const deporte = localStorage.getItem("deporte");
      const disciplina = localStorage.getItem("disciplina");
      const imcCategoria = localStorage.getItem("imcCategoria"); // bajo peso, normal, sobrepeso
      const tipoCuerpo = localStorage.getItem("tipoCuerpo");     // endomorfo, etc.
      const nombre = localStorage.getItem("nombre");

      return { deporte, disciplina, imcCategoria, tipoCuerpo, nombre };
    }

    function mostrarPlan() {
      const { deporte, disciplina, imcCategoria, tipoCuerpo, nombre } = getDatos();

      const info = `
        <h2>Hola ${nombre},</h2>
        <p>Deporte: <strong>${deporte} (${disciplina})</strong></p>
        <p>IMC: <strong>${imcCategoria}</strong></p>
        <p>Tipo de cuerpo: <strong>${tipoCuerpo}</strong></p>
      `;
      document.getElementById("infoUsuario").innerHTML = info;

      const comidas = (planAlimentacion[deporte] &&
                      planAlimentacion[deporte][disciplina] &&
                      planAlimentacion[deporte][disciplina][imcCategoria] &&
                      planAlimentacion[deporte][disciplina][imcCategoria][tipoCuerpo]) || [];

      const comidasHtml = comidas.length
        ? comidas.map((c, i) => `<p><strong>Día ${Math.floor(i/3)+1}</strong> – ${c}</p>`).join("")
        : "<p>Estamos generando tu plan. Vuelve pronto para verlo completo.</p>";

      document.getElementById("planAlimentacion").innerHTML = `
        <h3>Plan de alimentación personalizado</h3>
        ${comidasHtml}
      `;

      const tipsFinal = [
        tips[imcCategoria] || "",
        tips[deporte] || "",
      ].filter(Boolean).join("<br>");

      document.getElementById("tipsSalud").innerHTML = `
        <h3>Tips de salud</h3>
        <p>${tipsFinal}</p>
      `;
    }

    function toggleTheme() {
      const isDark = document.body.style.getPropertyValue('--bg-color') !== "#ffffff";
      document.body.style.setProperty('--bg-color', isDark ? '#ffffff' : '#121212');
      document.body.style.setProperty('--text-color', isDark ? '#000' : '#fff');
    }

    mostrarPlan();
  </script>
</body>
</html>
