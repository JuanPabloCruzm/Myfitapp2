<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Plan de Alimentaci√≥n</title>
  <link rel="icon" href="favicon.ico" />
  <style>
    body {
      background-color: #111;
      color: white;
      font-family: Arial, sans-serif;
      padding: 20px;
    }
    h1, h2 {
      color: #00d8a7;
    }
    .plan {
      margin-bottom: 40px;
      border-bottom: 1px solid #555;
      padding-bottom: 20px;
    }
    ul {
      padding-left: 20px;
    }
    .botones {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }
    button {
      background-color: #00d8a7;
      color: black;
      padding: 10px 20px;
      font-weight: bold;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
    button:hover {
      background-color: #00b38f;
    }
    .condiciones {
      margin-bottom: 20px;
    }
    .condiciones label {
      display: block;
      margin-bottom: 5px;
    }
  </style>
</head>
<body>
  <h1>üçΩÔ∏è Plan de Alimentaci√≥n Semanal</h1>

  <div class="condiciones">
    <h2>‚öïÔ∏è Selecciona tus condiciones m√©dicas:</h2>
    <label><input type="checkbox" value="Diabetes" onchange="actualizarCondiciones()"> Diabetes</label>
    <!-- Puedes agregar m√°s condiciones aqu√≠ si lo deseas -->
  </div>

  <p id="alerta"></p>
  <div id="contenidoAlimentacion"></div>

  <div class="botones">
    <button onclick="window.location.href='menu.html'">Volver al men√∫</button>
  </div>

  <script>
    const imc = (localStorage.getItem('imc') || '').toLowerCase();
    let condicionesSeleccionadas = [];

    const alerta = document.getElementById('alerta');
    const contenido = document.getElementById('contenidoAlimentacion');

    const planDiabetes = {
      "bajo": {
        desayuno: [ "Avena con leche descremada y canela", "Pan integral con palta y huevo duro", "Yogur natural con semillas de ch√≠a y nueces", "Smoothie de avena, ar√°ndanos y leche vegetal", "Revuelto de huevos con espinaca y tostadas integrales", "Panqueques de avena con fruta natural", "Arepa integral con queso fresco bajo en sal" ],
        almuerzo: [ "Pechuga de pollo + arroz integral + ensalada", "Lentejas estofadas con verduras y huevo duro", "Ensalada de at√∫n, garbanzos y palta", "Pescado al horno con papas cocidas y espinacas", "Guiso de quinoa con verduras", "Omelette con queso bajo en grasa y arroz integral", "Bowl de arroz, pollo y vegetales salteados" ],
        cena: [ "Crema de zapallo + pan integral", "Tortilla de vegetales al horno", "Sopa de lentejas con zanahoria y apio", "Ensalada de huevo duro con palta y tomate", "Yogur + frutos secos + tostadas", "Pizza casera integral con vegetales", "Ensalada de at√∫n con garbanzos y lechuga" ]
      },
      "normal": {
        desayuno: [ "Tostadas integrales con huevo y tomate", "Avena con leche vegetal y frutos secos", "Yogur con linaza y ar√°ndanos", "Pan integral con queso fresco y palta", "Smoothie de espinaca, kiwi y avena", "Galletas de avena caseras", "Tortilla de claras con vegetales" ],
        almuerzo: [ "Pechuga de pavo + quinoa + ensalada", "Hamburguesa de lentejas + ensalada mixta", "Pescado al horno + verduras al vapor", "Ensalada de arroz integral + garbanzos", "Pollo grillado con pur√© de zapallo", "Tortilla espa√±ola al horno", "Sopa de verduras con fideos integrales" ],
        cena: [ "Ensalada de at√∫n con lechuga y huevo", "Crema de verduras + pan integral", "Huevo cocido + vegetales al vapor", "Yogur natural + frutos secos", "Pescado con pur√© de coliflor", "Omelette de espinaca", "Wrap de pollo con pan integral" ]
      },
      "sobrepeso": {
        desayuno: [ "Avena cocida con manzana y canela", "Pan integral con palta y t√© sin az√∫car", "Yogur natural con linaza y semillas", "Smoothie verde con pepino, espinaca y lim√≥n", "Tostadas integrales con ricota y tomate", "Huevo revuelto con avena y verduras", "Galletas de avena sin az√∫car + t√© verde" ],
        almuerzo: [ "Pollo al horno + ensalada verde + media papa cocida", "Ensalada de at√∫n con lentejas y lim√≥n", "Guiso de zapallo italiano con huevo", "Pescado a la plancha con quinoa", "Hamburguesa de lentejas con ensalada", "Ensalada tibia de pollo con espinaca y tomate", "Crema de verduras con pollo desmenuzado" ],
        cena: [ "Caldo de verduras + huevo cocido", "Ensalada de repollo, zanahoria y pollo", "Verduras al vapor con filete de pescado", "Sopa de legumbres sin sal a√±adida", "Ensalada de at√∫n y huevo duro", "Yogur natural + semillas de linaza", "Huevo revuelto + pan de centeno" ]
      }
    };

    function actualizarCondiciones() {
      const checkboxes = document.querySelectorAll('.condiciones input[type="checkbox"]');
      condicionesSeleccionadas = Array.from(checkboxes)
        .filter(checkbox => checkbox.checked)
        .map(checkbox => checkbox.value);

      localStorage.setItem('condiciones', JSON.stringify(condicionesSeleccionadas));
      mostrarPlan();
    }

    function mostrarPlan() {
      contenido.innerHTML = '';
      if (condicionesSeleccionadas.includes("Diabetes")) {
        const plan = planDiabetes[imc];
        if (!plan) {
          contenido.innerHTML = '<p>No hay un plan definido para tu combinaci√≥n de IMC y condici√≥n.</p>';
          return;
        }

        alerta.innerHTML = '‚öïÔ∏è <strong>Plan adaptado a tus condiciones m√©dicas:</strong> ' + condicionesSeleccionadas.join(', ') + '. Consulta siempre con un profesional.';

        ['desayuno', 'almuerzo', 'cena'].forEach((comida) => {
          const comidas = plan[comida];
          const div = document.createElement('div');
          div.className = 'plan';
          div.innerHTML = `<h2>${comida.charAt(0).toUpperCase() + comida.slice(1)}s</h2><ul>` +
            comidas.map(dia => `<li>${dia}</li>`).join('') +
            '</ul>';
          contenido.appendChild(div);
        });
      } else {
        alerta.innerHTML = '';
        contenido.innerHTML = '<p>Por favor selecciona una condici√≥n m√©dica para mostrar un plan personalizado.</p>';
      }
    }

    // Cargar condiciones previas si existen
    window.onload = () => {
      const guardadas = JSON.parse(localStorage.getItem('condiciones')) || [];
      const checkboxes = document.querySelectorAll('.condiciones input[type="checkbox"]');
      checkboxes.forEach(cb => {
        if (guardadas.includes(cb.value)) cb.checked = true;
      });
      condicionesSeleccionadas = guardadas;
      mostrarPlan();
    };
  </script>
</body>
</html>
