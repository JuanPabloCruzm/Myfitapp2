<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Plan de Entrenamiento - MiFitApp</title>
<style>
  body {
    background-color: #121212;
    color: #eee;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0; padding: 0; min-height: 100vh;
    display: flex; flex-direction: column; align-items: center;
  }
  header {
    background: #1f1f1f;
    width: 100%; max-width: 720px;
    padding: 20px;
    text-align: center;
    font-size: 1.8rem;
    font-weight: bold;
    border-bottom: 1px solid #444;
  }
  main {
    flex-grow: 1;
    max-width: 720px;
    width: 90%;
    padding: 20px;
  }
  .info {
    font-size: 1rem;
    margin-bottom: 10px;
    color: #bbb;
  }
  .plan-dia {
    background: #222;
    margin: 10px 0;
    padding: 15px 20px;
    border-radius: 8px;
    box-shadow: 0 0 8px #333;
  }
  .plan-dia h3 {
    margin: 0 0 8px 0;
    color: #ff9800;
  }
  button {
    background-color: #ff9800;
    border: none;
    border-radius: 8px;
    padding: 12px 25px;
    color: #121212;
    font-weight: bold;
    cursor: pointer;
    margin-top: 20px;
    box-shadow: 0 3px 8px #d67e00;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background-color: #e68900;
  }
  footer {
    margin: 20px 0;
    color: #555;
    font-size: 0.9rem;
  }
  @media (max-width: 480px) {
    header {
      font-size: 1.4rem;
    }
    button {
      width: 100%;
    }
  }
</style>
</head>
<body>

<header>Plan de Entrenamiento Personalizado</header>

<main>
  <div class="info" id="datosUsuario"></div>
  <div id="planContainer"></div>
  <button id="btnVolver">Volver al Menú</button>
</main>

<footer>By: Juan Pablo Cruz</footer>

<script>
  // Aquí normalizamos claves para manejar espacios y mayúsculas
  function normalizarClave(texto) {
    return texto.trim().toLowerCase().replace(/\s+/g, '_').replace(/[áàäâ]/g,'a').replace(/[éèëê]/g,'e').replace(/[íìïî]/g,'i').replace(/[óòöô]/g,'o').replace(/[úùüû]/g,'u').replace(/[ñ]/g,'n');
  }

  // Datos completos de entrenamiento resumidos (7 días) para cada combinación
  // Para no hacer un objeto gigantesco, aquí definimos ejemplos por deporte + disciplina + imc + tipo cuerpo + edad + nivel + tiempo
  // Se puede expandir agregando más combinaciones siguiendo este formato
  const planesEntrenamiento = {
    mtb: {
      xc: {
        bajo_peso: {
          endomorfo: {
            '18-30': {
              principiante: {
                '2-5': [
                  "Día 1: Pedaleo suave 30 min + estiramientos",
                  "Día 2: Entrenamiento fuerza piernas 40 min",
                  "Día 3: Descanso activo (caminata ligera 20 min)",
                  "Día 4: Pedaleo moderado 45 min",
                  "Día 5: Circuito técnica MTB 30 min",
                  "Día 6: Core y estabilidad 30 min",
                  "Día 7: Descanso completo"
                ],
                '5-8': [
                  "Día 1: Pedaleo moderado 45 min + estiramientos",
                  "Día 2: Entrenamiento fuerza y resistencia 50 min",
                  "Día 3: Descanso activo + yoga 30 min",
                  "Día 4: Entrenamiento intervalos 40 min",
                  "Día 5: Circuito técnica + velocidad 40 min",
                  "Día 6: Core, estabilidad y flexibilidad 45 min",
                  "Día 7: Descanso completo"
                ],
                '10-15': [
                  "Día 1: Entrenamiento intervalos 60 min",
                  "Día 2: Fuerza + resistencia 60 min",
                  "Día 3: Descanso activo y movilidad 45 min",
                  "Día 4: Ruta larga MTB 90 min",
                  "Día 5: Técnica y velocidad 60 min",
                  "Día 6: Core y estabilidad 50 min",
                  "Día 7: Descanso completo"
                ],
                '15+': [
                  "Día 1: Entrenamiento intervalos intensos 75 min",
                  "Día 2: Fuerza avanzada + resistencia 75 min",
                  "Día 3: Recuperación activa y estiramientos 60 min",
                  "Día 4: Ruta larga y técnica 120 min",
                  "Día 5: Técnica y velocidad avanzada 70 min",
                  "Día 6: Core, estabilidad y movilidad 60 min",
                  "Día 7: Descanso completo"
                ]
              },
              intermedio: {
                '2-5': [
                  "Día 1: Intervalos moderados 40 min",
                  "Día 2: Fuerza y resistencia 50 min",
                  "Día 3: Descanso activo con estiramientos",
                  "Día 4: Ruta de MTB con subidas 60 min",
                  "Día 5: Técnica y velocidad 45 min",
                  "Día 6: Core y equilibrio 40 min",
                  "Día 7: Descanso completo"
                ],
                '5-8': [
                  "Día 1: Intervalos avanzados 60 min",
                  "Día 2: Fuerza y resistencia 65 min",
                  "Día 3: Descanso activo + yoga 45 min",
                  "Día 4: Ruta larga MTB 90 min",
                  "Día 5: Técnica, velocidad y saltos 60 min",
                  "Día 6: Core y movilidad 55 min",
                  "Día 7: Descanso completo"
                ],
                '10-15': [
                  "Día 1: Intervalos intensos 75 min",
                  "Día 2: Fuerza avanzada y resistencia 75 min",
                  "Día 3: Recuperación activa 60 min",
                  "Día 4: Ruta larga técnica 120 min",
                  "Día 5: Técnica, velocidad y salto 75 min",
                  "Día 6: Core, movilidad y equilibrio 60 min",
                  "Día 7: Descanso completo"
                ],
                '15+': [
                  "Día 1: Intervalos máximos 90 min",
                  "Día 2: Fuerza máxima + resistencia 90 min",
                  "Día 3: Recuperación activa y estiramientos 70 min",
                  "Día 4: Ruta muy larga técnica 150 min",
                  "Día 5: Técnica, velocidad avanzada y saltos 90 min",
                  "Día 6: Core, movilidad y equilibrio 70 min",
                  "Día 7: Descanso completo"
                ]
              },
              avanzado: {
                '2-5': [
                  "Día 1: Intervalos explosivos 50 min",
                  "Día 2: Fuerza máxima y resistencia 60 min",
                  "Día 3: Recuperación activa 45 min",
                  "Día 4: Ruta técnica y rápida 75 min",
                  "Día 5: Técnica avanzada y saltos 60 min",
                  "Día 6: Core, movilidad y equilibrio 50 min",
                  "Día 7: Descanso completo"
                ],
                '5-8': [
                  "Día 1: Intervalos de alta intensidad 75 min",
                  "Día 2: Fuerza máxima y resistencia 80 min",
                  "Día 3: Recuperación activa con yoga 60 min",
                  "Día 4: Ruta larga técnica y rápida 120 min",
                  "Día 5: Técnica avanzada, velocidad y salto 75 min",
                  "Día 6: Core, movilidad y equilibrio 60 min",
                  "Día 7: Descanso completo"
                ],
                '10-15': [
                  "Día 1: Intervalos explosivos intensos 90 min",
                  "Día 2: Fuerza máxima y resistencia 90 min",
                  "Día 3: Recuperación activa y estiramientos 70 min",
                  "Día 4: Ruta larga y muy técnica 150 min",
                  "Día 5: Técnica avanzada, velocidad y salto 90 min",
                  "Día 6: Core, movilidad y equilibrio 70 min",
                  "Día 7: Descanso completo"
                ],
                '15+': [
                  "Día 1: Entrenamiento máximo explosivo 120 min",
                  "Día 2: Fuerza máxima y resistencia 120 min",
                  "Día 3: Recuperación activa y yoga 90 min",
                  "Día 4: Ruta ultra larga y técnica 180 min",
                  "Día 5: Técnica máxima, velocidad y salto 120 min",
                  "Día 6: Core, movilidad y equilibrio 90 min",
                  "Día 7: Descanso completo"
                ]
              }
            },
            // Puedes agregar más edades o tipos de cuerpo siguiendo este patrón
          },
          mesomorfo: {
            '18-30': {
              principiante: {
                '2-5': [
                  "Día 1: Pedaleo suave 35 min + estiramientos",
                  "Día 2: Fuerza piernas 45 min",
                  "Día 3: Descanso activo",
                  "Día 4: Pedaleo moderado 50 min",
                  "Día 5: Técnica MTB 35 min",
                  "Día 6: Core y estabilidad 35 min",
                  "Día 7: Descanso completo"
                ],
                // Resto igual que endomorfo o adaptar
              },
              // Resto niveles...
            },
            // Más edades...
          },
          ectomorfo: {
            // Datos similares
          }
        },
        normal: {
          // Datos similares
        },
        sobrepeso: {
          // Datos similares adaptados
        }
      },
      all_mountain: {
        // Puedes copiar y adaptar los planes de XC con cambios
      },
      dh: {},
      enduro: {},
      descenso_urbano: {}
    },
    ruta: {
      contrarreloj: {},
      competencia: {},
      resistencia: {}
    },
    pista: {
      velocidad: {},
      omnium: {},
      persecucion: {}
    },
    triatlon: {},
    natacion: {
      aguas_abiertas: {
        bajo_peso: {
          endomorfo: {
            '18-30': {
              principiante: {
                '2-5': [
                  "Día 1: Técnica de respiración y calentamiento 30 min",
                  "Día 2: Nado libre suave 40 min",
                  "Día 3: Descanso activo",
                  "Día 4: Ejercicios de patada 30 min",
                  "Día 5: Series de nado estilo libre 40 min",
                  "Día 6: Entrenamiento de resistencia 45 min",
                  "Día 7: Descanso completo"
                ],
                // Resto rangos de tiempo...
              }
            }
          }
        }
      },
      pecho: {},
      espalda: {},
      mariposa: {},
      libre: {}
    },
    esqui_en_nieve: {
      alpino_freestyle: {},
      fondo: {}
    },
    snowboard: {
      freestyle: {},
      slalom: {},
      halfpipe: {}
    },
    esqui_acuatico: {
      slalom: {},
      saltos: {},
      trucos: {}
    },
    atletismo: {
      pista: {},
      salto: {},
      lanzamiento: {},
      fondo: {},
      velocidad: {}
    },
    boxeo: {
      amateur: {},
      profesional: {},
      entrenamiento: {}
    },
    escalada: {
      boulder: {},
      deportiva: {},
      velocidad: {}
    },
    buceo: {
      profundo: {},
      tecnico: {},
      recreativo: {}
    },
    rugby: {
      back: {},
      forward: {}
    },
    basquet: {
      base: {},
      escolta: {},
      alero: {},
      ala_pivot: {},
      pivot: {}
    },
    gym: {
      fuerza: {},
      resistencia: {},
      estetica: {},
      rehabilitacion: {},
      hipertrofia: {},
      movilidad: {}
    },
    artes_marciales_mixtas: {
      jiu_jitsu: {},
      muay_thai: {},
      boxeo: {},
      lucha: {},
      mma: {}
    }
  };

  // Funcion para obtener parámetros URL
  function getParametrosURL() {
    const params = new URLSearchParams(window.location.search);
    return {
      deporte: params.get('deporte') ? normalizarClave(params.get('deporte')) : '',
      disciplina: params.get('disciplina') ? normalizarClave(params.get('disciplina')) : '',
      imc: params.get('imc') ? normalizarClave(params.get('imc')) : '',
      tipoCuerpo: params.get('tipoCuerpo') ? normalizarClave(params.get('tipoCuerpo')) : '',
      edad: params.get('edad') || '',
      nivel: params.get('nivel') ? normalizarClave(params.get('nivel')) : '',
      tiempoSemanal: params.get('tiempoSemanal') || ''
    };
  }

  // Mostrar datos usuario
  function mostrarDatosUsuario(datos) {
    const div = document.getElementById('datosUsuario');
    div.textContent = `Deporte: ${datos.deporte.replace(/_/g, ' ')} | Disciplina: ${datos.disciplina.replace(/_/g, ' ')} | IMC: ${datos.imc.replace(/_/g, ' ')} | Tipo cuerpo: ${datos.tipoCuerpo.replace(/_/g, ' ')} | Edad: ${datos.edad} | Nivel: ${datos.nivel.replace(/_/g, ' ')} | Tiempo semanal (hrs): ${datos.tiempoSemanal}`;
  }

  // Mostrar plan o mensaje error
  function mostrarPlan(plan) {
    const contenedor = document.getElementById('planContainer');
    contenedor.innerHTML = '';
    if (!plan || plan.length === 0) {
      contenedor.innerHTML = '<p>No se encontró un plan para esta combinación.</p>';
      return;
    }
    plan.forEach((dia, i) => {
      const div = document.createElement('div');
      div.className = 'plan-dia';
      div.innerHTML = `<h3>Día ${i+1}</h3><p>${dia}</p>`;
      contenedor.appendChild(div);
    });
  }

  // Obtener plan
  function obtenerPlan(datos) {
    try {
      if(!planesEntrenamiento[datos.deporte]) return null;
      if(!planesEntrenamiento[datos.deporte][datos.disciplina]) return null;
      if(!planesEntrenamiento[datos.deporte][datos.disciplina][datos.imc]) return null;
      if(!planesEntrenamiento[datos.deporte][datos.disciplina][datos.imc][datos.tipoCuerpo]) return null;
      if(!planesEntrenamiento[datos.deporte][datos.disciplina][datos.imc][datos.tipoCuerpo][datos.edad]) return null;
      if(!planesEntrenamiento[datos.deporte][datos.disciplina][datos.imc][datos.tipoCuerpo][datos.edad][datos.nivel]) return null;
      if(!planesEntrenamiento[datos.deporte][datos.disciplina][datos.imc][datos.tipoCuerpo][datos.edad][datos.nivel][datos.tiempoSemanal]) return null;
      return planesEntrenamiento[datos.deporte][datos.disciplina][datos.imc][datos.tipoCuerpo][datos.edad][datos.nivel][datos.tiempoSemanal];
    } catch(e) {
      console.error(e);
      return null;
    }
  }

  // Boton volver
  document.getElementById('btnVolver').addEventListener('click', () => {
    window.location.href = 'menu.html';
  });

  window.onload = () => {
    const datos = getParametrosURL();
    mostrarDatosUsuario(datos);
    const plan = obtenerPlan(datos);
    mostrarPlan(plan);
  };
</script>

</body>
</html>
