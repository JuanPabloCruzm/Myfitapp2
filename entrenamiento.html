<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Plan de Entrenamiento - MiFitApp</title>
<style>
  body {
    background-color: #121212;
    color: #eee;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0; padding: 0; min-height: 100vh;
    display: flex; flex-direction: column; align-items: center;
  }
  header {
    background: #1f1f1f;
    width: 100%; max-width: 720px;
    padding: 20px;
    text-align: center;
    font-size: 1.8rem;
    font-weight: bold;
    border-bottom: 1px solid #444;
  }
  main {
    flex-grow: 1;
    max-width: 720px;
    width: 90%;
    padding: 20px;
  }
  .info {
    font-size: 1rem;
    margin-bottom: 10px;
    color: #bbb;
  }
  .plan-dia {
    background: #222;
    margin: 10px 0;
    padding: 15px 20px;
    border-radius: 8px;
    box-shadow: 0 0 8px #333;
  }
  .plan-dia h3 {
    margin: 0 0 8px 0;
    color: #ff9800;
  }
  button {
    background-color: #ff9800;
    border: none;
    border-radius: 8px;
    padding: 12px 25px;
    color: #121212;
    font-weight: bold;
    cursor: pointer;
    margin-top: 20px;
    box-shadow: 0 3px 8px #d67e00;
    transition: background-color 0.3s ease;
  }
  button:hover {
    background-color: #e68900;
  }
  footer {
    margin: 20px 0;
    color: #555;
    font-size: 0.9rem;
  }
  @media (max-width: 480px) {
    header {
      font-size: 1.4rem;
    }
    button {
      width: 100%;
    }
  }
</style>
</head>
<body>

<header>Plan de Entrenamiento Personalizado</header>

<main>
  <div class="info" id="datosUsuario"></div>
  <div id="planContainer"></div>
  <button id="btnVolver">Volver al Menú</button>
</main>

<footer>By: Juan Pablo Cruz</footer>

<script>
  // --------- Datos de ejemplo para entrenamientos ---------
  // Para que no sea extremadamente largo, puse algunos deportes y combinaciones.
  // Tú puedes ampliar con el mismo formato para el resto.
  const planesEntrenamiento = {
    MTB: {
      XC: {
        "bajo peso": {
          "endomorfo": {
            "18-30": {
              principiante: {
                "2-5": [
                  "Día 1: Pedaleo suave 30 min + estiramientos",
                  "Día 2: Entrenamiento fuerza piernas 40 min",
                  "Día 3: Descanso activo (caminata ligera 20 min)",
                  "Día 4: Pedaleo moderado 45 min",
                  "Día 5: Circuito técnica MTB 30 min",
                  "Día 6: Core y estabilidad 30 min",
                  "Día 7: Descanso completo"
                ],
                "5-8": [
                  "Día 1: Pedaleo moderado 45 min + estiramientos",
                  "Día 2: Entrenamiento fuerza y resistencia 50 min",
                  "Día 3: Descanso activo + yoga 30 min",
                  "Día 4: Entrenamiento intervalos 40 min",
                  "Día 5: Circuito técnica + velocidad 40 min",
                  "Día 6: Core, estabilidad y flexibilidad 45 min",
                  "Día 7: Descanso completo"
                ],
                // Completar otros rangos ...
              },
              intermedio: {
                "2-5": [
                  "Día 1: Entrenamiento intervalos 30 min",
                  "Día 2: Fuerza + resistencia 50 min",
                  "Día 3: Descanso activo con estiramientos",
                  "Día 4: Ruta de MTB 1h con subidas",
                  "Día 5: Técnica y velocidad 40 min",
                  "Día 6: Core y equilibrio 40 min",
                  "Día 7: Descanso completo"
                ],
                // Más rangos...
              },
              avanzado: {
                // Más datos...
              }
            },
            "31-50": {
              // Datos para otra edad
            }
          },
          "mesomorfo": {
            // Datos...
          },
          "ectomorfo": {
            // Datos...
          }
        },
        "normal": {
          // Datos...
        },
        "sobrepeso": {
          // Datos...
        }
      },
      ALL_MOUNTAIN: {
        // Datos...
      },
      dh: {
        // Datos...
      },
      enduro: {
        // Datos...
      },
      descenso_urbano: {
        // Datos...
      }
    },
    ruta: {
      contrarreloj: {
        // Datos...
      },
      competencia: {
        // Datos...
      },
      resistencia: {
        // Datos...
      }
    },
    pista: {
      velocidad: {
        // Datos...
      },
      omnium: {
        // Datos...
      },
      persecucion: {
        // Datos...
      }
    },
    triatlon: {
      // Datos...
    },
    natacion: {
      "aguas abiertas": {
        // Datos...
      },
      pecho: {
        // Datos...
      },
      espalda: {
        // Datos...
      },
      mariposa: {
        // Datos...
      },
      libre: {
        // Datos...
      }
    },
    // Continúa con los demás deportes y disciplinas...
  };

  // --------- Función para obtener parámetros de URL ---------
  function getParametrosURL() {
    const params = new URLSearchParams(window.location.search);
    return {
      deporte: params.get('deporte')?.toLowerCase() || '',
      disciplina: params.get('disciplina')?.toLowerCase() || '',
      imc: params.get('imc')?.toLowerCase() || '',
      tipoCuerpo: params.get('tipoCuerpo')?.toLowerCase() || '',
      edad: params.get('edad') || '',
      nivel: params.get('nivel')?.toLowerCase() || '',
      tiempoSemanal: params.get('tiempoSemanal') || ''
    };
  }

  // --------- Mostrar plan o mensaje de error ---------
  function mostrarPlan(plan) {
    const contenedor = document.getElementById('planContainer');
    contenedor.innerHTML = '';

    if (!plan || plan.length === 0) {
      contenedor.innerHTML = '<p>No se encontró un plan de entrenamiento para la combinación seleccionada.</p>';
      return;
    }

    plan.forEach((dia, i) => {
      const divDia = document.createElement('div');
      divDia.className = 'plan-dia';
      divDia.innerHTML = `<h3>Día ${i + 1}</h3><p>${dia}</p>`;
      contenedor.appendChild(divDia);
    });
  }

  // --------- Mostrar datos usuario en pantalla ---------
  function mostrarDatosUsuario(datos) {
    const div = document.getElementById('datosUsuario');
    div.textContent = `Deporte: ${capitalize(datos.deporte)} | Disciplina: ${capitalize(datos.disciplina)} | IMC: ${capitalize(datos.imc)} | Tipo de cuerpo: ${capitalize(datos.tipoCuerpo)} | Edad: ${datos.edad} | Nivel: ${capitalize(datos.nivel)} | Tiempo semanal (hrs): ${datos.tiempoSemanal}`;
  }

  // --------- Capitalizar texto ---------
  function capitalize(text) {
    if (!text) return '';
    return text.charAt(0).toUpperCase() + text.slice(1);
  }

  // --------- Función principal para obtener plan ---------
  function obtenerPlan(datos) {
    try {
      const {deporte, disciplina, imc, tipoCuerpo, edad, nivel, tiempoSemanal} = datos;

      // Se normalizan las claves para buscar en el objeto
      const dep = deporte.replace(/\s+/g, '_');
      const disc = disciplina.replace(/\s+/g, '_');
      const imcKey = imc;
      const tipoKey = tipoCuerpo;
      const edadKey = edad;
      const nivelKey = nivel;
      const tiempoKey = tiempoSemanal;

      // Navegar en el objeto planesEntrenamiento con validaciones
      if (!planesEntrenamiento[dep]) return null;
      if (!planesEntrenamiento[dep][disc]) return null;
      if (!planesEntrenamiento[dep][disc][imcKey]) return null;
      if (!planesEntrenamiento[dep][disc][imcKey][tipoKey]) return null;
      if (!planesEntrenamiento[dep][disc][imcKey][tipoKey][edadKey]) return null;
      if (!planesEntrenamiento[dep][disc][imcKey][tipoKey][edadKey][nivelKey]) return null;
      if (!planesEntrenamiento[dep][disc][imcKey][tipoKey][edadKey][nivelKey][tiempoKey]) return null;

      return planesEntrenamiento[dep][disc][imcKey][tipoKey][edadKey][nivelKey][tiempoKey];

    } catch (error) {
      console.error('Error obteniendo plan:', error);
      return null;
    }
  }

  // --------- Botón volver ---------
  document.getElementById('btnVolver').addEventListener('click', () => {
    window.location.href = 'menu.html'; // Cambiar si la ruta es diferente
  });

  // --------- Inicialización ---------
  window.onload = () => {
    const datos = getParametrosURL();

    // Mostrar datos
    mostrarDatosUsuario(datos);

    // Obtener plan
    const plan = obtenerPlan(datos);

    // Mostrar plan o mensaje
    mostrarPlan(plan);
  };
</script>

</body>
</html>
